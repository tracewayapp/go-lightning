(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{2955:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/guides/mysql",function(){return r(6249)}])},6249:function(e,s,r){"use strict";r.r(s),r.d(s,{__toc:function(){return a}});var n=r(5893),l=r(2673),i=r(6513),o=r(9004);r(4759);var t=r(2643);let a=[{depth:2,value:"Installation",id:"installation"},{depth:2,value:"Basic Setup",id:"basic-setup"},{depth:3,value:"Import and Driver Registration",id:"import-and-driver-registration"},{depth:3,value:"Connection String",id:"connection-string"},{depth:2,value:"Parameter Placeholders",id:"parameter-placeholders"},{depth:2,value:"INSERT with AUTO_INCREMENT",id:"insert-with-auto_increment"},{depth:2,value:"Transaction Patterns",id:"transaction-patterns"},{depth:3,value:"Basic Transaction",id:"basic-transaction"},{depth:3,value:"Transaction with Isolation Level",id:"transaction-with-isolation-level"},{depth:2,value:"Dynamic IN Clauses",id:"dynamic-in-clauses"},{depth:3,value:"For Integer IDs",id:"for-integer-ids"},{depth:3,value:"For Parameterized IN Clauses",id:"for-parameterized-in-clauses"},{depth:2,value:"Best Practices",id:"best-practices"},{depth:3,value:"1. Always Use parseTime=true",id:"1-always-use-parsetimetrue"},{depth:3,value:"2. Use utf8mb4 for Unicode",id:"2-use-utf8mb4-for-unicode"},{depth:3,value:"3. Use Connection Pooling",id:"3-use-connection-pooling"},{depth:3,value:"4. Prefer InnoDB Engine",id:"4-prefer-innodb-engine"},{depth:3,value:"5. Handle NULL Values",id:"5-handle-null-values"},{depth:2,value:"UUID Support",id:"uuid-support"},{depth:2,value:"MySQL-Specific Features",id:"mysql-specific-features"},{depth:3,value:"JSON Support",id:"json-support"},{depth:3,value:"Full-Text Search",id:"full-text-search"},{depth:2,value:"Common Patterns",id:"common-patterns"},{depth:3,value:"Upsert (INSERT ... ON DUPLICATE KEY UPDATE)",id:"upsert-insert--on-duplicate-key-update"},{depth:3,value:"Bulk Insert",id:"bulk-insert"},{depth:3,value:"Soft Deletes",id:"soft-deletes"},{depth:2,value:"Differences from PostgreSQL",id:"differences-from-postgresql"},{depth:3,value:"Parameter Renumbering",id:"parameter-renumbering"},{depth:2,value:"Troubleshooting",id:"troubleshooting"},{depth:3,value:'"invalid connection"',id:"invalid-connection"},{depth:3,value:'"unsupported Scan, storing driver.Value type []uint8 into type *time.Time"',id:"unsupported-scan-storing-drivervalue-type-uint8-into-type-timetime"},{depth:3,value:"\"Error 1364: Field 'X' doesn't have a default value\"",id:"error-1364-field-x-doesnt-have-a-default-value"},{depth:3,value:'"Error 2006: MySQL server has gone away"',id:"error-2006-mysql-server-has-gone-away"},{depth:3,value:'"Error 1206: The total number of locks exceeds the lock table size"',id:"error-1206-the-total-number-of-locks-exceeds-the-lock-table-size"},{depth:2,value:"Version Compatibility",id:"version-compatibility"},{depth:2,value:"Next Steps",id:"next-steps"}];function c(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",span:"span",h3:"h3",strong:"strong",ul:"ul",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ol:"ol",a:"a"},(0,t.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{children:"MySQL Guide"}),"\n",(0,n.jsx)(s.p,{children:"This guide covers MySQL-specific features and best practices when using go-lightning with MySQL."}),"\n",(0,n.jsx)(s.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"go"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"get"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"github.com/tracewayapp/go-lightning/lmy"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"go"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"get"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"github.com/go-sql-driver/mysql"})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,n.jsx)(s.h3,{id:"import-and-driver-registration",children:"Import and Driver Registration"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"package"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" main"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"database/sql"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    _ "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/go-sql-driver/mysql"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// MySQL driver"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning/lmy"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"yourproject/models"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})})]})}),"\n",(0,n.jsx)(s.h3,{id:"connection-string",children:"Connection String"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sql."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Open"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"mysql"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:password@tcp(localhost:3306)/dbname?parseTime=true"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Fatal"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(err)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"defer"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Close"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Important parameters:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"parseTime=true"})," - ",(0,n.jsx)(s.strong,{children:"Required"})," for scanning ",(0,n.jsx)(s.code,{children:"time.Time"})," fields"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"charset=utf8mb4"})," - Recommended for full Unicode support"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"loc=Local"})," - Use local timezone"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Full example:"})}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"dsn "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:password@tcp(localhost:3306)/dbname?parseTime=true&charset=utf8mb4&loc=Local"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sql."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Open"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"mysql"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", dsn)"})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"parameter-placeholders",children:"Parameter Placeholders"}),"\n",(0,n.jsxs)(s.p,{children:["MySQL uses ",(0,n.jsx)(s.strong,{children:"question mark placeholders"}),": ",(0,n.jsx)(s.code,{children:"?"})]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Single parameter"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGenericSingle[User](tx,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE id = ?"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", userId)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Multiple parameters"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[User](tx,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE age > ? AND city = ?"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"25"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"New York"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// IN clause"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ids "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" fmt."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Sprintf"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE id IN ('}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"%s"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:')"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"JoinForIn"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(ids))"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[User](tx, query)"})]})]})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Note:"})," Unlike PostgreSQL's ",(0,n.jsx)(s.code,{children:"$1, $2"}),", MySQL placeholders are ",(0,n.jsx)(s.strong,{children:"positional"})," and ",(0,n.jsx)(s.strong,{children:"unnamed"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"insert-with-auto_increment",children:"INSERT with AUTO_INCREMENT"}),"\n",(0,n.jsxs)(s.p,{children:["MySQL's ",(0,n.jsx)(s.code,{children:"lmy.InsertGeneric"})," uses ",(0,n.jsx)(s.code,{children:"NULL"})," for auto-increment fields and retrieves the ID via ",(0,n.jsx)(s.code,{children:"LastInsertId()"}),":"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"User{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    FirstName: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"John"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    LastName:  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Doe"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Email:     "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"john@example.com"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, user)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Fatal"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(err)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"fmt."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Printf"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Inserted user with ID: '}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"%d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'\\n"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", id)"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Generated SQL:"})}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INSERT INTO"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" users (id, first_name, last_name, email)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VALUES"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"NULL"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", ?, ?, ?)"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Key differences from PostgreSQL:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Uses ",(0,n.jsx)(s.code,{children:"NULL"})," instead of ",(0,n.jsx)(s.code,{children:"DEFAULT"})," for auto-increment ID"]}),"\n",(0,n.jsxs)(s.li,{children:["No ",(0,n.jsx)(s.code,{children:"RETURNING"})," clause (MySQL doesn't support it)"]}),"\n",(0,n.jsxs)(s.li,{children:["Uses ",(0,n.jsx)(s.code,{children:"LastInsertId()"})," to retrieve generated ID"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"transaction-patterns",children:"Transaction Patterns"}),"\n",(0,n.jsx)(s.h3,{id:"basic-transaction",children:"Basic Transaction"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"tx, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Begin"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"defer"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Rollback"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Safe even after Commit()"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Operations"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Rollback via defer"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Commit"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Commit"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(); err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(s.h3,{id:"transaction-with-isolation-level",children:"Transaction with Isolation Level"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"tx, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"BeginTx"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(context."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Background"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(), "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sql.TxOptions{"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Isolation: sql.LevelRepeatableRead,"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"})})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"MySQL isolation levels:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"sql.LevelReadUncommitted"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"sql.LevelReadCommitted"})}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"sql.LevelRepeatableRead"})," - MySQL default"]}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"sql.LevelSerializable"})}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"dynamic-in-clauses",children:"Dynamic IN Clauses"}),"\n",(0,n.jsx)(s.h3,{id:"for-integer-ids",children:"For Integer IDs"}),"\n",(0,n.jsxs)(s.p,{children:["Use ",(0,n.jsx)(s.code,{children:"JoinForIn"})," to build comma-separated lists:"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ids "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" fmt."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Sprintf"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE id IN ('}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"%s"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:')"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"JoinForIn"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(ids))"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[User](tx, query)"})]})]})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Output:"})," ",(0,n.jsx)(s.code,{children:"SELECT * FROM users WHERE id IN (1,2,3,4,5)"})]}),"\n",(0,n.jsx)(s.h3,{id:"for-parameterized-in-clauses",children:"For Parameterized IN Clauses"}),"\n",(0,n.jsxs)(s.p,{children:["Use ",(0,n.jsx)(s.code,{children:"JoinStringForIn"}),":"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"usernames "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" []"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"alice"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"bob"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"charlie"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" fmt."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Sprintf"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE username IN ('}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"%s"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:')"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"JoinStringForIn"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", usernames))"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[User](tx, query, usernames"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Output:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Query: ",(0,n.jsx)(s.code,{children:"SELECT * FROM users WHERE username IN (?,?,?)"})]}),"\n",(0,n.jsxs)(s.li,{children:["Args: ",(0,n.jsx)(s.code,{children:'["alice", "bob", "charlie"]'})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Note:"})," The ",(0,n.jsx)(s.code,{children:"offset"})," parameter in ",(0,n.jsx)(s.code,{children:"JoinStringForIn"})," is ",(0,n.jsx)(s.strong,{children:"ignored"})," for MySQL because all placeholders are ",(0,n.jsx)(s.code,{children:"?"}),". It's included for API compatibility with PostgreSQL."]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Both produce the same result in MySQL"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"JoinStringForIn"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", params)  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// -> "?,?,?"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"JoinStringForIn"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", params)  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// -> "?,?,?"  (offset ignored)'})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,n.jsxs)(s.h3,{id:"1-always-use-parsetimetrue",children:["1. Always Use ",(0,n.jsx)(s.code,{children:"parseTime=true"})]}),"\n",(0,n.jsxs)(s.p,{children:["Without this, ",(0,n.jsx)(s.code,{children:"time.Time"})," fields won't scan correctly:"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ❌ Will fail to scan dates"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db, _ "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sql."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Open"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"mysql"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@tcp(host)/db"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ✅ Correct"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db, _ "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sql."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Open"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"mysql"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@tcp(host)/db?parseTime=true"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.h3,{id:"2-use-utf8mb4-for-unicode",children:"2. Use utf8mb4 for Unicode"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(s.code,{"data-language":"go","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"dsn "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@tcp(host)/db?parseTime=true&charset=utf8mb4"'})]})})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Schema:"})}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TABLE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"users"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INT"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" AUTO_INCREMENT "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"PRIMARY KEY"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VARCHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"),"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    email "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VARCHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") ENGINE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"InnoDB "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"DEFAULT"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" CHARSET"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"utf8mb4 "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"COLLATE="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"utf8mb4_unicode_ci;"})]})]})}),"\n",(0,n.jsx)(s.h3,{id:"3-use-connection-pooling",children:"3. Use Connection Pooling"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SetMaxOpenConns"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"25"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SetMaxIdleConns"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SetConnMaxLifetime"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" time.Minute)"})]})]})}),"\n",(0,n.jsx)(s.h3,{id:"4-prefer-innodb-engine",children:"4. Prefer InnoDB Engine"}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TABLE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"users"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INT"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" AUTO_INCREMENT "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"PRIMARY KEY"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VARCHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") ENGINE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"InnoDB;  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-- Recommended over MyISAM"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Why InnoDB:"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Supports transactions (required for go-lightning)"}),"\n",(0,n.jsx)(s.li,{children:"Foreign key constraints"}),"\n",(0,n.jsx)(s.li,{children:"Row-level locking"}),"\n",(0,n.jsx)(s.li,{children:"Better concurrency"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"5-handle-null-values",children:"5. Handle NULL Values"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id        "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Biography "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// NULL-able column"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Insert with NULL"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"User{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name:      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"John"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Biography: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:",  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Will be NULL in database"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)(s.h2,{id:"uuid-support",children:"UUID Support"}),"\n",(0,n.jsx)(s.p,{children:"While MySQL can use UUIDs, it's less common than in PostgreSQL. go-lightning supports it:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Entity"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id          "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// VARCHAR(36) or CHAR(36)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name        "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Description "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lmy.Register[Entity]()"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Auto-generate UUID"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"entity "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Entity{Name: "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"My Entity"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"uuid, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGenericUuid"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, entity)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Or use existing UUID"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"entity.Id "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" uuid."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"New"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"String"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGenericExistingUuid"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, entity)"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Schema:"})}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TABLE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"entities"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"36"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"PRIMARY KEY"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:",  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-- Fixed length for UUIDs"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VARCHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"),"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"description"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TEXT"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})})]})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Note:"})," MySQL doesn't have a native UUID type. Use ",(0,n.jsx)(s.code,{children:"CHAR(36)"})," or ",(0,n.jsx)(s.code,{children:"BINARY(16)"})," with custom encoding."]}),"\n",(0,n.jsx)(s.h2,{id:"mysql-specific-features",children:"MySQL-Specific Features"}),"\n",(0,n.jsx)(s.h3,{id:"json-support",children:"JSON Support"}),"\n",(0,n.jsx)(s.p,{children:"MySQL 5.7+ supports JSON columns:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Product"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id         "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name       "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Attributes "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// JSON string"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Store JSON"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"attrs "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'`{"color": "red", "size": "large"}`'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"product "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Product{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name:       "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"T-Shirt"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Attributes: attrs,"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, product)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Query JSON"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"products, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[Product](tx,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"\"SELECT * FROM products WHERE JSON_EXTRACT(attributes, '$.color') = ?\""}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"red"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Schema:"})}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"TABLE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"products"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INT"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" AUTO_INCREMENT "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"PRIMARY KEY"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VARCHAR"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"),"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    attributes "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"JSON"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})})]})}),"\n",(0,n.jsx)(s.h3,{id:"full-text-search",children:"Full-Text Search"}),"\n",(0,n.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"sql","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"-- Create full-text index"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"CREATE"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"FULLTEXT"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INDEX"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" idx_content "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ON"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" articles(title, content);"})]})]})}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Search"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"articles, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[Article](tx,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM articles WHERE MATCH(title, content) AGAINST (? IN NATURAL LANGUAGE MODE)"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"golang database"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,n.jsx)(s.h3,{id:"upsert-insert--on-duplicate-key-update",children:"Upsert (INSERT ... ON DUPLICATE KEY UPDATE)"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    INSERT INTO users (id, name, email)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    VALUES (?, ?, ?)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    ON DUPLICATE KEY UPDATE name = VALUES(name)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"result, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Exec"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(query, user.Id, user.Name, user.Email)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, _ "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" result."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"LastInsertId"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]})]})}),"\n",(0,n.jsx)(s.h3,{id:"bulk-insert",children:"Bulk Insert"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"query "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    INSERT INTO users (first_name, last_name, email)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"    VALUES (?, ?, ?), (?, ?, ?), (?, ?, ?)"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"`"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"_, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Exec"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(query,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"John"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Doe"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"john@example.com"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Jane"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Doe"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"jane@example.com"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Bob"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Smith"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"bob@example.com"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})})]})}),"\n",(0,n.jsx)(s.h3,{id:"soft-deletes",children:"Soft Deletes"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id        "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name      "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    DeletedAt "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"time.Time  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// NULL when not deleted"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Soft delete"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Update"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"UPDATE users SET deleted_at = NOW() WHERE id = ?"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", userId)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Query only active users"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lmy.SelectGeneric[User](tx,"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE deleted_at IS NULL"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"differences-from-postgresql",children:"Differences from PostgreSQL"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Feature"}),(0,n.jsx)(s.th,{children:"PostgreSQL (lpg)"}),(0,n.jsx)(s.th,{children:"MySQL (lmy)"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Placeholders"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"$1, $2, $3"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"?"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"INSERT Return"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"RETURNING id"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"LastInsertId()"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Auto-Increment"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"SERIAL"})," / ",(0,n.jsx)(s.code,{children:"IDENTITY"})]}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"AUTO_INCREMENT"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Auto-Increment INSERT"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"DEFAULT"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"NULL"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"UUID Native Support"})}),(0,n.jsx)(s.td,{children:"Yes (UUID type)"}),(0,n.jsx)(s.td,{children:"No (use CHAR/BINARY)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Array Types"})}),(0,n.jsx)(s.td,{children:"Yes"}),(0,n.jsx)(s.td,{children:"No"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Parameter Renumbering"})}),(0,n.jsx)(s.td,{children:"Yes (in UpdateGeneric)"}),(0,n.jsx)(s.td,{children:"No (not needed)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"JSON Type"})}),(0,n.jsx)(s.td,{children:"JSONB (binary)"}),(0,n.jsx)(s.td,{children:"JSON (text-based)"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"parameter-renumbering",children:"Parameter Renumbering"}),"\n",(0,n.jsxs)(s.p,{children:["PostgreSQL's ",(0,n.jsx)(s.code,{children:"lpg.UpdateGeneric"})," automatically renumbers ",(0,n.jsx)(s.code,{children:"$N"})," placeholders. MySQL doesn't need this because all placeholders are ",(0,n.jsx)(s.code,{children:"?"}),":"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// PostgreSQL"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"lpg."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"UpdateGeneric"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, user, "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id = $1"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", userId)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// WHERE parameter $1 is renumbered to $4 internally"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// MySQL"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"lmy."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"UpdateGeneric"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, user, "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id = ?"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", userId)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// No renumbering needed - just adds ? to end"})})]})}),"\n",(0,n.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsx)(s.h3,{id:"invalid-connection",children:'"invalid connection"'}),"\n",(0,n.jsx)(s.p,{children:"Check connection string format:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ❌ Wrong"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@localhost:3306/db"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ✅ Correct"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@tcp(localhost:3306)/db"'})})]})}),"\n",(0,n.jsx)(s.h3,{id:"unsupported-scan-storing-drivervalue-type-uint8-into-type-timetime",children:'"unsupported Scan, storing driver.Value type []uint8 into type *time.Time"'}),"\n",(0,n.jsxs)(s.p,{children:["Add ",(0,n.jsx)(s.code,{children:"parseTime=true"})," to connection string:"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(s.code,{"data-language":"go","data-theme":"default",children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user:pass@tcp(host)/db?parseTime=true"'})})})}),"\n",(0,n.jsx)(s.h3,{id:"error-1364-field-x-doesnt-have-a-default-value",children:"\"Error 1364: Field 'X' doesn't have a default value\""}),"\n",(0,n.jsx)(s.p,{children:"Your schema requires a value but go-lightning isn't providing one. Options:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Add field to struct"}),"\n",(0,n.jsxs)(s.li,{children:["Make column NULL-able: ",(0,n.jsx)(s.code,{children:"ALTER TABLE users MODIFY column_name VARCHAR(255) NULL"})]}),"\n",(0,n.jsxs)(s.li,{children:["Add default value: ",(0,n.jsx)(s.code,{children:"ALTER TABLE users MODIFY column_name VARCHAR(255) DEFAULT ''"})]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"error-2006-mysql-server-has-gone-away",children:'"Error 2006: MySQL server has gone away"'}),"\n",(0,n.jsx)(s.p,{children:"Connection was idle too long. Set connection lifetime:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SetConnMaxLifetime"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"5"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" time.Minute)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"db."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SetMaxIdleConns"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,n.jsx)(s.h3,{id:"error-1206-the-total-number-of-locks-exceeds-the-lock-table-size",children:'"Error 1206: The total number of locks exceeds the lock table size"'}),"\n",(0,n.jsx)(s.p,{children:"Increase InnoDB buffer pool size in my.cnf:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"ini","data-theme":"default",hasCopyCode:!0,children:(0,n.jsxs)(s.code,{"data-language":"ini","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[mysqld]"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"innodb_buffer_pool_size"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" 256M"})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"version-compatibility",children:"Version Compatibility"}),"\n",(0,n.jsx)(s.p,{children:"go-lightning works with:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"MySQL 5.7+"})," - Recommended (JSON support, better performance)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"MySQL 8.0+"})," - Recommended (window functions, CTEs)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"MariaDB 10.2+"})," - Compatible"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/guides/transactions",children:"Transactions Guide"})," - Advanced transaction patterns"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/examples/mysql-complete",children:"MySQL Complete Example"})," - Full working example"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/api-reference/mysql/crud-operations",children:"MySQL API Reference"})," - Complete API documentation"]}),"\n"]})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.a)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/guides/mysql.mdx",route:"/guides/mysql",pageMap:[{kind:"Meta",data:{index:"Home","getting-started":"Getting Started",guides:"Guides","api-reference":"API Reference",examples:"Examples",troubleshooting:"Troubleshooting",contributing:"Contributing"}},{kind:"Folder",name:"api-reference",route:"/api-reference",children:[{kind:"Meta",data:{core:"Core",postgresql:"PostgreSQL",mysql:"MySQL"}},{kind:"Folder",name:"core",route:"/api-reference/core",children:[{kind:"Meta",data:{interfaces:"Interfaces",registration:"Registration","generic-operations":"Generic Operations","manual-operations":"Manual Operations",helpers:"Helper Functions"}},{kind:"MdxPage",name:"generic-operations",route:"/api-reference/core/generic-operations"},{kind:"MdxPage",name:"helpers",route:"/api-reference/core/helpers"},{kind:"MdxPage",name:"interfaces",route:"/api-reference/core/interfaces"},{kind:"MdxPage",name:"manual-operations",route:"/api-reference/core/manual-operations"},{kind:"MdxPage",name:"registration",route:"/api-reference/core/registration"}]},{kind:"Folder",name:"mysql",route:"/api-reference/mysql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/mysql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/mysql/overview"}]},{kind:"Folder",name:"postgresql",route:"/api-reference/postgresql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations","uuid-support":"UUID Support","parameter-handling":"Parameter Handling"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/postgresql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/postgresql/overview"},{kind:"MdxPage",name:"parameter-handling",route:"/api-reference/postgresql/parameter-handling"},{kind:"MdxPage",name:"uuid-support",route:"/api-reference/postgresql/uuid-support"}]}]},{kind:"Folder",name:"contributing",route:"/contributing",children:[{kind:"Meta",data:{development:"Development Setup",testing:"Testing"}},{kind:"MdxPage",name:"development",route:"/contributing/development"},{kind:"MdxPage",name:"testing",route:"/contributing/testing"}]},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"Meta",data:{"basic-crud":"Basic CRUD","postgresql-complete":"PostgreSQL Complete Example","mysql-complete":"MySQL Complete Example","uuid-entities":"UUID Entities","custom-naming":"Custom Naming Strategy","advanced-queries":"Advanced Queries"}},{kind:"MdxPage",name:"advanced-queries",route:"/examples/advanced-queries"},{kind:"MdxPage",name:"basic-crud",route:"/examples/basic-crud"},{kind:"MdxPage",name:"custom-naming",route:"/examples/custom-naming"},{kind:"MdxPage",name:"mysql-complete",route:"/examples/mysql-complete"},{kind:"MdxPage",name:"postgresql-complete",route:"/examples/postgresql-complete"},{kind:"MdxPage",name:"uuid-entities",route:"/examples/uuid-entities"}]},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{introduction:"Introduction",installation:"Installation","quick-start":"Quick Start","core-concepts":"Core Concepts"}},{kind:"MdxPage",name:"core-concepts",route:"/getting-started/core-concepts"},{kind:"MdxPage",name:"installation",route:"/getting-started/installation"},{kind:"MdxPage",name:"introduction",route:"/getting-started/introduction"},{kind:"MdxPage",name:"quick-start",route:"/getting-started/quick-start"}]},{kind:"Folder",name:"guides",route:"/guides",children:[{kind:"Meta",data:{postgresql:"PostgreSQL",mysql:"MySQL",registration:"Registration System","naming-strategies":"Naming Strategies",transactions:"Transactions"}},{kind:"MdxPage",name:"mysql",route:"/guides/mysql"},{kind:"MdxPage",name:"naming-strategies",route:"/guides/naming-strategies"},{kind:"MdxPage",name:"postgresql",route:"/guides/postgresql"},{kind:"MdxPage",name:"registration",route:"/guides/registration"},{kind:"MdxPage",name:"transactions",route:"/guides/transactions"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"troubleshooting",route:"/troubleshooting",children:[{kind:"Meta",data:{"common-errors":"Common Errors",debugging:"Debugging Guide","migration-guide":"Migration Guide"}},{kind:"MdxPage",name:"common-errors",route:"/troubleshooting/common-errors"},{kind:"MdxPage",name:"debugging",route:"/troubleshooting/debugging"},{kind:"MdxPage",name:"migration-guide",route:"/troubleshooting/migration-guide"}]}],flexsearch:{codeblocks:!0},title:"MySQL Guide",headings:a},pageNextRoute:"/guides/mysql",nextraLayout:i.ZP,themeConfig:o.Z};s.default=(0,l.j)(d)},9004:function(e,s,r){"use strict";var n=r(5893);s.Z={logo:(0,n.jsx)("span",{style:{fontWeight:700,fontSize:"1.2rem"},children:"⚡ go-lightning"}),project:{link:"https://github.com/tracewayapp/go-lightning"},docsRepositoryBase:"https://github.com/tracewayapp/go-lightning/tree/main/docs",useNextSeoProps:()=>({titleTemplate:"%s – go-lightning"}),head:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{property:"og:title",content:"go-lightning"}),(0,n.jsx)("meta",{property:"og:description",content:"Lightweight Go library for simplified database operations"})]}),primaryHue:205,darkMode:!0,nextThemes:{defaultTheme:"dark"},sidebar:{defaultMenuCollapseLevel:1,toggleButton:!0},toc:{backToTop:!0},editLink:{text:"Edit this page on GitHub →"},feedback:{content:"Question? Give us feedback →",labels:"feedback"},footer:{text:(0,n.jsxs)("span",{children:["MIT ",new Date().getFullYear()," \xa9"," ",(0,n.jsx)("a",{href:"https://github.com/tracewayapp",target:"_blank",children:"Traceway"})]})}}},5789:function(){}},function(e){e.O(0,[73,888,774,179],function(){return e(e.s=2955)}),_N_E=e.O()}]);