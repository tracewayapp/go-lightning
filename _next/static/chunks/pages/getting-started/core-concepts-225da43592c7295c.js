(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{6242:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/getting-started/core-concepts",function(){return n(6692)}])},6692:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return a}});var r=n(5893),i=n(2673),l=n(6513),t=n(9004);n(4759);var o=n(2643);let a=[{depth:2,value:"Registration System",id:"registration-system"},{depth:3,value:"Why Registration is Required",id:"why-registration-is-required"},{depth:3,value:"What Happens During Registration",id:"what-happens-during-registration"},{depth:3,value:"The FieldMap Structure",id:"the-fieldmap-structure"},{depth:3,value:"When to Register",id:"when-to-register"},{depth:2,value:"Naming Strategies",id:"naming-strategies"},{depth:3,value:"Default Naming Strategy",id:"default-naming-strategy"},{depth:4,value:"Table Names",id:"table-names"},{depth:4,value:"Column Names",id:"column-names"},{depth:3,value:"DbNamingStrategy Interface",id:"dbnamingstrategy-interface"},{depth:3,value:"Custom Naming Strategies",id:"custom-naming-strategies"},{depth:2,value:"ID Field Handling",id:"id-field-handling"},{depth:3,value:"Integer ID (Auto-Increment)",id:"integer-id-auto-increment"},{depth:3,value:"String ID (UUID)",id:"string-id-uuid"},{depth:3,value:"No ID Field",id:"no-id-field"},{depth:2,value:"Generic vs Manual Operations",id:"generic-vs-manual-operations"},{depth:3,value:"Generic Operations",id:"generic-operations"},{depth:3,value:"Manual Operations",id:"manual-operations"},{depth:2,value:"Transaction-Based Operations",id:"transaction-based-operations"},{depth:3,value:"Why Transactions Only?",id:"why-transactions-only"},{depth:3,value:"Transaction Pattern",id:"transaction-pattern"},{depth:3,value:"Deferred Rollback Pattern",id:"deferred-rollback-pattern"},{depth:2,value:"Performance Characteristics",id:"performance-characteristics"},{depth:3,value:"Registration (One-Time Cost)",id:"registration-one-time-cost"},{depth:3,value:"Query Execution (Runtime)",id:"query-execution-runtime"},{depth:2,value:"Type Safety with Generics",id:"type-safety-with-generics"},{depth:2,value:"Validation and Error Handling",id:"validation-and-error-handling"},{depth:3,value:"Column Validation",id:"column-validation"},{depth:3,value:"No Rows vs Errors",id:"no-rows-vs-errors"},{depth:2,value:"Summary",id:"summary"},{depth:2,value:"Next Steps",id:"next-steps"}];function c(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",code:"code",pre:"pre",span:"span",ol:"ol",li:"li",strong:"strong",ul:"ul",h4:"h4",a:"a",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,o.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Core Concepts"}),"\n",(0,r.jsx)(s.p,{children:"Understanding these core concepts will help you use go-lightning effectively."}),"\n",(0,r.jsx)(s.h2,{id:"registration-system",children:"Registration System"}),"\n",(0,r.jsx)(s.h3,{id:"why-registration-is-required",children:"Why Registration is Required"}),"\n",(0,r.jsxs)(s.p,{children:["Before using a struct type with generic operations, you must register it with ",(0,r.jsx)(s.code,{children:"Register[T]()"}),". This is a one-time operation that builds metadata used for all subsequent database operations."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    FirstName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    LastName  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Email     "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lpg.Register[User]()  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Register during package initialization"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"what-happens-during-registration",children:"What Happens During Registration"}),"\n",(0,r.jsxs)(s.p,{children:["When you call ",(0,r.jsx)(s.code,{children:"Register[User]()"}),", go-lightning:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Inspects the struct"})," using reflection to find all fields"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Maps field names to column names"})," using the naming strategy"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Detects the ID field"})," to enable special handling for auto-increment"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Builds query templates"})," for INSERT and UPDATE operations"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Stores metadata"})," in a global ",(0,r.jsx)(s.code,{children:"FieldMap"})," for fast lookups"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"the-fieldmap-structure",children:"The FieldMap Structure"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"FieldMap"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ColumnsMap    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"map"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// column name → struct field index"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ColumnKeys    []"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"         "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// all column names in order"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    HasIntId      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"bool"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"             "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// true if Id field is int type"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    InsertQuery   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// pre-built INSERT template"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    UpdateQuery   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// pre-built UPDATE template"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    InsertColumns []"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"         "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// columns for INSERT (excludes auto-increment id)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Example for User struct:"})}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"FieldMap{"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ColumnsMap: {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"first_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"last_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"email"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    },"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ColumnKeys: ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"id"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"first_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"last_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"email"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"],"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    HasIntId: "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    InsertQuery: "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"INSERT INTO users (first_name, last_name, email) VALUES ($1, $2, $3) RETURNING id"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    UpdateQuery: "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"UPDATE users SET first_name = $1, last_name = $2, email = $3"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    InsertColumns: ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"first_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"last_name"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"email"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"],"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"when-to-register",children:"When to Register"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Best Practice"}),": Register in the ",(0,r.jsx)(s.code,{children:"init()"})," function of the package that defines the struct:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// models/user.go"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"package"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" models"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning/lpg"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    FirstName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lpg.Register[User]()"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Why ",(0,r.jsx)(s.code,{children:"init()"}),"?"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Runs automatically when the package is imported"}),"\n",(0,r.jsxs)(s.li,{children:["Happens once, before ",(0,r.jsx)(s.code,{children:"main()"})]}),"\n",(0,r.jsx)(s.li,{children:"No risk of forgetting to register"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What if I forget to register?"})}),"\n",(0,r.jsx)(s.p,{children:"You'll get a helpful panic message:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"text","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"text","data-theme":"default",children:(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Non registered model User used. Please call `var _ = Register[User]()` after you define User"})})})}),"\n",(0,r.jsx)(s.h2,{id:"naming-strategies",children:"Naming Strategies"}),"\n",(0,r.jsx)(s.p,{children:"Naming strategies control how Go struct names map to database table and column names."}),"\n",(0,r.jsx)(s.h3,{id:"default-naming-strategy",children:"Default Naming Strategy"}),"\n",(0,r.jsxs)(s.p,{children:["go-lightning uses ",(0,r.jsx)(s.code,{children:"DefaultDbNamingStrategy"})," which follows these rules:"]}),"\n",(0,r.jsx)(s.h4,{id:"table-names",children:"Table Names"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Convert struct name from CamelCase to snake_case"}),"\n",(0,r.jsxs)(s.li,{children:["Add ",(0,r.jsx)(s.code,{children:"s"})," suffix for pluralization"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"User"})," → ",(0,r.jsx)(s.code,{children:"users"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"UserProfile"})," → ",(0,r.jsx)(s.code,{children:"user_profiles"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"OrderHistory"})," → ",(0,r.jsx)(s.code,{children:"order_historys"})," (simple suffix, not smart pluralization)"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"column-names",children:"Column Names"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Convert field name from CamelCase to snake_case"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Examples:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"Id"})," → ",(0,r.jsx)(s.code,{children:"id"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"FirstName"})," → ",(0,r.jsx)(s.code,{children:"first_name"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"CreatedAt"})," → ",(0,r.jsx)(s.code,{children:"created_at"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"IsActive"})," → ",(0,r.jsx)(s.code,{children:"is_active"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"dbnamingstrategy-interface",children:"DbNamingStrategy Interface"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"DbNamingStrategy"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"interface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetTableNameFromStructName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetColumnNameFromStructName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"custom-naming-strategies",children:"Custom Naming Strategies"}),"\n",(0,r.jsx)(s.p,{children:"You can implement your own naming strategy for different conventions:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// Example: Prefix all tables with "app_"'})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PrefixedNamingStrategy"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    prefix "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (s PrefixedNamingStrategy) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetTableNameFromStructName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(structName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    tableName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"toSnakeCase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(structName)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" s.prefix "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tableName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"s"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (s PrefixedNamingStrategy) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetColumnNameFromStructName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(fieldName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"toSnakeCase"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(fieldName)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Usage"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"lpg.Register[User](PrefixedNamingStrategy{prefix: "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"app_"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}, lpg.PgInsertUpdateQueryGenerator{})"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// User → app_users"})})]})}),"\n",(0,r.jsxs)(s.p,{children:["For more details, see ",(0,r.jsx)(s.a,{href:"/guides/naming-strategies",children:"Naming Strategies Guide"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"id-field-handling",children:"ID Field Handling"}),"\n",(0,r.jsxs)(s.p,{children:["go-lightning provides special handling for primary key ",(0,r.jsx)(s.code,{children:"Id"})," fields based on their type."]}),"\n",(0,r.jsx)(s.h3,{id:"integer-id-auto-increment",children:"Integer ID (Auto-Increment)"}),"\n",(0,r.jsxs)(s.p,{children:["If your struct has an ",(0,r.jsx)(s.code,{children:"Id"})," field of type ",(0,r.jsx)(s.code,{children:"int"}),":"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"     "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Auto-increment detected"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Behavior:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"INSERT"}),": ",(0,r.jsx)(s.code,{children:"Id"})," field is ",(0,r.jsx)(s.strong,{children:"excluded"})," from the INSERT statement (database generates it)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"PostgreSQL"}),": Uses ",(0,r.jsx)(s.code,{children:"RETURNING id"})," clause to retrieve the generated ID"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"MySQL"}),": Uses ",(0,r.jsx)(s.code,{children:"LastInsertId()"})," to retrieve the generated ID"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"UPDATE"}),": ",(0,r.jsx)(s.code,{children:"Id"})," field ",(0,r.jsx)(s.strong,{children:"is included"})," (but typically not in SET clause)"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"SQL Generated (PostgreSQL):"})}),"\n",(0,r.jsx)(s.pre,{"data-language":"sql","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"sql","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"INSERT INTO"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" users ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"VALUES"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ($"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") RETURNING id"})]})})}),"\n",(0,r.jsx)(s.h3,{id:"string-id-uuid",children:"String ID (UUID)"}),"\n",(0,r.jsxs)(s.p,{children:["If your struct has an ",(0,r.jsx)(s.code,{children:"Id"})," field of type ",(0,r.jsx)(s.code,{children:"string"}),":"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Entity"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id          "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// UUID will be generated"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Description "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Use ",(0,r.jsx)(s.code,{children:"InsertGenericUuid"}),":"]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"uuid, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGenericUuid"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"entity)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// uuid is the generated UUID string"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// entity.Id is now set to the generated UUID"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Or use ",(0,r.jsx)(s.code,{children:"InsertGenericExistingUuid"})," if you already have a UUID:"]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"entity.Id "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" uuid."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"New"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"String"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Set UUID first"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGenericExistingUuid"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"entity)"})]})]})}),"\n",(0,r.jsx)(s.h3,{id:"no-id-field",children:"No ID Field"}),"\n",(0,r.jsxs)(s.p,{children:["If your struct doesn't have an ",(0,r.jsx)(s.code,{children:"Id"})," field, all fields are treated equally:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ActivityLog"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Timestamp time.Time"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Action    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    UserId    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:"All fields will be included in INSERT operations."}),"\n",(0,r.jsx)(s.h2,{id:"generic-vs-manual-operations",children:"Generic vs Manual Operations"}),"\n",(0,r.jsx)(s.p,{children:"go-lightning offers two approaches for database operations:"}),"\n",(0,r.jsx)(s.h3,{id:"generic-operations",children:"Generic Operations"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Automatic"})," struct-to-row mapping. Requires registration."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Automatic mapping"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGeneric[User](tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["No manual ",(0,r.jsx)(s.code,{children:"Scan()"})," calls"]}),"\n",(0,r.jsx)(s.li,{children:"Type-safe with compile-time checking"}),"\n",(0,r.jsx)(s.li,{children:"Less boilerplate code"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Requires registration"}),"\n",(0,r.jsx)(s.li,{children:"All SELECT columns must exist in struct"}),"\n",(0,r.jsx)(s.li,{children:"Less flexible for complex queries"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Use when:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Standard CRUD operations"}),"\n",(0,r.jsx)(s.li,{children:"Struct fields match query columns"}),"\n",(0,r.jsx)(s.li,{children:"You want minimal boilerplate"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"manual-operations",children:"Manual Operations"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Custom"})," mapping function required. No registration needed."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mapUser"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(rows "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sql.Rows, user "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"User) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"error"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" rows."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Scan"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user.Id, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user.FirstName, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user.LastName)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectMultiple[User](tx, mapUser, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT id, first_name, last_name FROM users"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pros:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Full control over scanning"}),"\n",(0,r.jsx)(s.li,{children:"Can select subset of columns"}),"\n",(0,r.jsx)(s.li,{children:"Can map to different field names"}),"\n",(0,r.jsx)(s.li,{children:"No registration required"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cons:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Manual ",(0,r.jsx)(s.code,{children:"Scan()"})," implementation"]}),"\n",(0,r.jsx)(s.li,{children:"More boilerplate"}),"\n",(0,r.jsx)(s.li,{children:"Easier to make mistakes"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Use when:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Complex queries with joins"}),"\n",(0,r.jsx)(s.li,{children:"Selecting only specific columns"}),"\n",(0,r.jsx)(s.li,{children:"Mapping to DTOs or view models"}),"\n",(0,r.jsx)(s.li,{children:"Aggregations and computed fields"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"transaction-based-operations",children:"Transaction-Based Operations"}),"\n",(0,r.jsxs)(s.p,{children:["All go-lightning operations require a ",(0,r.jsx)(s.code,{children:"*sql.Tx"})," (transaction) parameter, not ",(0,r.jsx)(s.code,{children:"*sql.DB"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"why-transactions-only",children:"Why Transactions Only?"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Explicit control"})," - You decide when to commit or rollback"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Consistency"})," - Multiple operations in one transaction"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Safety"})," - Automatic rollback on errors if using ",(0,r.jsx)(s.code,{children:"defer"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"transaction-pattern",children:"Transaction Pattern"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Begin transaction"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"tx, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" db."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Begin"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"defer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Rollback"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Rollback if not committed"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Perform operations"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Rollback happens via defer"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Commit on success"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" tx."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Commit"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(); err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"deferred-rollback-pattern",children:"Deferred Rollback Pattern"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"defer tx.Rollback()"})," pattern is safe and recommended:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["If ",(0,r.jsx)(s.code,{children:"Commit()"})," succeeds, ",(0,r.jsx)(s.code,{children:"Rollback()"})," is a no-op (does nothing)"]}),"\n",(0,r.jsxs)(s.li,{children:["If an error occurs before ",(0,r.jsx)(s.code,{children:"Commit()"}),", changes are rolled back"]}),"\n",(0,r.jsx)(s.li,{children:"Ensures cleanup even if function panics"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["For more details, see ",(0,r.jsx)(s.a,{href:"/guides/transactions",children:"Transactions Guide"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,r.jsx)(s.h3,{id:"registration-one-time-cost",children:"Registration (One-Time Cost)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"When"}),": At package initialization or first ",(0,r.jsx)(s.code,{children:"Register[]"})," call"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What happens"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Reflection inspects struct fields"}),"\n",(0,r.jsx)(s.li,{children:"Query templates are built"}),"\n",(0,r.jsxs)(s.li,{children:["Metadata is cached in ",(0,r.jsx)(s.code,{children:"FieldMap"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cost"}),": Milliseconds per type, happens once"]}),"\n",(0,r.jsx)(s.h3,{id:"query-execution-runtime",children:"Query Execution (Runtime)"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"What happens"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Lookup ",(0,r.jsx)(s.code,{children:"FieldMap"})," from global cache (O(1) map lookup)"]}),"\n",(0,r.jsx)(s.li,{children:"Use pre-built query template"}),"\n",(0,r.jsx)(s.li,{children:"Build pointers to struct fields using cached indexes"}),"\n",(0,r.jsx)(s.li,{children:"Execute query and scan"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cost"}),": Comparable to hand-written ",(0,r.jsx)(s.code,{children:"database/sql"})," code"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"No runtime reflection"}),": Field positions are pre-calculated during registration."]}),"\n",(0,r.jsx)(s.h2,{id:"type-safety-with-generics",children:"Type Safety with Generics"}),"\n",(0,r.jsx)(s.p,{children:"go-lightning leverages Go 1.18+ generics for compile-time type safety:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ✅ Type-safe: Returns []*User"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGeneric[User](tx, query)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ✅ Compiler knows this is *User"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGenericSingle[User](tx, query, args"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ✅ Type parameter ensures correct struct type"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user)  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// user must be *User"})]})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"IDE autocomplete for returned types"}),"\n",(0,r.jsx)(s.li,{children:"Compile-time error if wrong type used"}),"\n",(0,r.jsx)(s.li,{children:"No type assertions needed"}),"\n",(0,r.jsx)(s.li,{children:"Refactoring safety"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"validation-and-error-handling",children:"Validation and Error Handling"}),"\n",(0,r.jsx)(s.h3,{id:"column-validation",children:"Column Validation"}),"\n",(0,r.jsx)(s.p,{children:"go-lightning validates that all columns returned by SELECT queries exist in the registered struct:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Struct has: Id, FirstName, LastName, Email"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGeneric[User](tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT *, created_at FROM users"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Panic: invalid column 'created_at' is not found in the struct"})})]})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution"}),": Only select columns that exist in your struct:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"users, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGeneric[User](tx,"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT id, first_name, last_name, email FROM users"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})]})}),"\n",(0,r.jsx)(s.h3,{id:"no-rows-vs-errors",children:"No Rows vs Errors"}),"\n",(0,r.jsx)(s.p,{children:'go-lightning distinguishes between "no rows found" and actual errors:'}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"user, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg.SelectGenericSingle[User](tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"SELECT * FROM users WHERE id = $1"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"999"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// If no rows: user == nil, err == nil"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// If error: user == nil, err != nil"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Always check both:"})}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Actual error"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" user "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" errors."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"New"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"user not found"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// No rows"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Concept"}),(0,r.jsx)(s.th,{children:"Key Points"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Registration"})}),(0,r.jsxs)(s.td,{children:["Required before generic operations; happens once in ",(0,r.jsx)(s.code,{children:"init()"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"FieldMap"})}),(0,r.jsx)(s.td,{children:"Pre-built metadata for fast query execution"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Naming Strategy"})}),(0,r.jsx)(s.td,{children:"Converts Go names to database names (customizable)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"ID Handling"})}),(0,r.jsx)(s.td,{children:"Special behavior for int (auto-increment) and string (UUID)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Generic vs Manual"})}),(0,r.jsx)(s.td,{children:"Generic = automatic mapping; Manual = custom control"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Transactions"})}),(0,r.jsxs)(s.td,{children:["All operations require ",(0,r.jsx)(s.code,{children:"*sql.Tx"})," for safety"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Performance"})}),(0,r.jsx)(s.td,{children:"Reflection at init time, zero runtime reflection"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Type Safety"})}),(0,r.jsx)(s.td,{children:"Generics provide compile-time checking"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/guides/postgresql",children:"PostgreSQL Guide"})," - PostgreSQL-specific features"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/guides/mysql",children:"MySQL Guide"})," - MySQL-specific features"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/guides/registration",children:"Registration Guide"})," - Deep dive into registration"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/guides/naming-strategies",children:"Naming Strategies"})," - Custom naming conventions"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/api-reference/core/interfaces",children:"API Reference"})," - Complete interface documentation"]}),"\n"]})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/getting-started/core-concepts.mdx",route:"/getting-started/core-concepts",pageMap:[{kind:"Meta",data:{index:"Home","getting-started":"Getting Started",guides:"Guides","api-reference":"API Reference",examples:"Examples",troubleshooting:"Troubleshooting",contributing:"Contributing"}},{kind:"Folder",name:"api-reference",route:"/api-reference",children:[{kind:"Meta",data:{core:"Core",postgresql:"PostgreSQL",mysql:"MySQL"}},{kind:"Folder",name:"core",route:"/api-reference/core",children:[{kind:"Meta",data:{interfaces:"Interfaces",registration:"Registration","generic-operations":"Generic Operations","manual-operations":"Manual Operations",helpers:"Helper Functions"}},{kind:"MdxPage",name:"generic-operations",route:"/api-reference/core/generic-operations"},{kind:"MdxPage",name:"helpers",route:"/api-reference/core/helpers"},{kind:"MdxPage",name:"interfaces",route:"/api-reference/core/interfaces"},{kind:"MdxPage",name:"manual-operations",route:"/api-reference/core/manual-operations"},{kind:"MdxPage",name:"registration",route:"/api-reference/core/registration"}]},{kind:"Folder",name:"mysql",route:"/api-reference/mysql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/mysql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/mysql/overview"}]},{kind:"Folder",name:"postgresql",route:"/api-reference/postgresql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations","uuid-support":"UUID Support","parameter-handling":"Parameter Handling"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/postgresql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/postgresql/overview"},{kind:"MdxPage",name:"parameter-handling",route:"/api-reference/postgresql/parameter-handling"},{kind:"MdxPage",name:"uuid-support",route:"/api-reference/postgresql/uuid-support"}]}]},{kind:"Folder",name:"contributing",route:"/contributing",children:[{kind:"Meta",data:{development:"Development Setup",testing:"Testing"}},{kind:"MdxPage",name:"development",route:"/contributing/development"},{kind:"MdxPage",name:"testing",route:"/contributing/testing"}]},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"Meta",data:{"basic-crud":"Basic CRUD","postgresql-complete":"PostgreSQL Complete Example","mysql-complete":"MySQL Complete Example","uuid-entities":"UUID Entities","custom-naming":"Custom Naming Strategy","advanced-queries":"Advanced Queries"}},{kind:"MdxPage",name:"advanced-queries",route:"/examples/advanced-queries"},{kind:"MdxPage",name:"basic-crud",route:"/examples/basic-crud"},{kind:"MdxPage",name:"custom-naming",route:"/examples/custom-naming"},{kind:"MdxPage",name:"mysql-complete",route:"/examples/mysql-complete"},{kind:"MdxPage",name:"postgresql-complete",route:"/examples/postgresql-complete"},{kind:"MdxPage",name:"uuid-entities",route:"/examples/uuid-entities"}]},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{introduction:"Introduction",installation:"Installation","quick-start":"Quick Start","core-concepts":"Core Concepts"}},{kind:"MdxPage",name:"core-concepts",route:"/getting-started/core-concepts"},{kind:"MdxPage",name:"installation",route:"/getting-started/installation"},{kind:"MdxPage",name:"introduction",route:"/getting-started/introduction"},{kind:"MdxPage",name:"quick-start",route:"/getting-started/quick-start"}]},{kind:"Folder",name:"guides",route:"/guides",children:[{kind:"Meta",data:{postgresql:"PostgreSQL",mysql:"MySQL",registration:"Registration System","naming-strategies":"Naming Strategies",transactions:"Transactions"}},{kind:"MdxPage",name:"mysql",route:"/guides/mysql"},{kind:"MdxPage",name:"naming-strategies",route:"/guides/naming-strategies"},{kind:"MdxPage",name:"postgresql",route:"/guides/postgresql"},{kind:"MdxPage",name:"registration",route:"/guides/registration"},{kind:"MdxPage",name:"transactions",route:"/guides/transactions"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"troubleshooting",route:"/troubleshooting",children:[{kind:"Meta",data:{"common-errors":"Common Errors",debugging:"Debugging Guide","migration-guide":"Migration Guide"}},{kind:"MdxPage",name:"common-errors",route:"/troubleshooting/common-errors"},{kind:"MdxPage",name:"debugging",route:"/troubleshooting/debugging"},{kind:"MdxPage",name:"migration-guide",route:"/troubleshooting/migration-guide"}]}],flexsearch:{codeblocks:!0},title:"Core Concepts",headings:a},pageNextRoute:"/getting-started/core-concepts",nextraLayout:l.ZP,themeConfig:t.Z};s.default=(0,i.j)(d)},9004:function(e,s,n){"use strict";var r=n(5893);s.Z={logo:(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"1.2rem"},children:"⚡ go-lightning"}),project:{link:"https://github.com/tracewayapp/go-lightning"},docsRepositoryBase:"https://github.com/tracewayapp/go-lightning/tree/main/docs",useNextSeoProps:()=>({titleTemplate:"%s – go-lightning"}),head:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("meta",{property:"og:title",content:"go-lightning"}),(0,r.jsx)("meta",{property:"og:description",content:"Lightweight Go library for simplified database operations"})]}),primaryHue:205,darkMode:!0,nextThemes:{defaultTheme:"dark"},sidebar:{defaultMenuCollapseLevel:1,toggleButton:!0},toc:{backToTop:!0},editLink:{text:"Edit this page on GitHub →"},feedback:{content:"Question? Give us feedback →",labels:"feedback"},footer:{text:(0,r.jsxs)("span",{children:["MIT ",new Date().getFullYear()," \xa9"," ",(0,r.jsx)("a",{href:"https://github.com/tracewayapp",target:"_blank",children:"Traceway"})]})}}},5789:function(){}},function(e){e.O(0,[73,888,774,179],function(){return e(e.s=6242)}),_N_E=e.O()}]);