(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48],{3478:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/api-reference/core/registration",function(){return n(8963)}])},8963:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return o}});var r=n(5893),i=n(2673),l=n(6513),t=n(9004);n(4759);var a=n(2643);let o=[{depth:2,value:"Register",id:"register"},{depth:3,value:"Signature",id:"signature"},{depth:3,value:"Parameters",id:"parameters"},{depth:3,value:"Description",id:"description"},{depth:3,value:"Example",id:"example"},{depth:3,value:"Database-Specific Shortcuts",id:"database-specific-shortcuts"},{depth:4,value:"PostgreSQL",id:"postgresql"},{depth:4,value:"MySQL",id:"mysql"},{depth:3,value:"When to Call",id:"when-to-call"},{depth:3,value:"Errors",id:"errors"},{depth:3,value:"See Also",id:"see-also"},{depth:2,value:"GetFieldMap",id:"getfieldmap"},{depth:3,value:"Signature",id:"signature-1"},{depth:3,value:"Parameters",id:"parameters-1"},{depth:3,value:"Returns",id:"returns"},{depth:3,value:"Description",id:"description-1"},{depth:3,value:"Example",id:"example-1"},{depth:3,value:"Error Handling",id:"error-handling"},{depth:3,value:"Use Cases",id:"use-cases"},{depth:3,value:"See Also",id:"see-also-1"}];function c(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",pre:"pre",code:"code",span:"span",ul:"ul",li:"li",strong:"strong",ol:"ol",h4:"h4",a:"a",hr:"hr"},(0,a.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Registration Functions"}),"\n",(0,r.jsx)(s.p,{children:"Functions for registering struct types with go-lightning."}),"\n",(0,r.jsx)(s.h2,{id:"register",children:"Register"}),"\n",(0,r.jsx)(s.p,{children:"Registers a struct type for use with generic database operations."}),"\n",(0,r.jsx)(s.h3,{id:"signature",children:"Signature"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"go","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Register[T any](namingStrategy DbNamingStrategy, queryGenerator InsertUpdateQueryGenerator)"})]})})}),"\n",(0,r.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"T"})," - The struct type to register (type parameter)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"namingStrategy"})," - Implementation of ",(0,r.jsx)(s.code,{children:"DbNamingStrategy"})," interface"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"queryGenerator"})," - Implementation of ",(0,r.jsx)(s.code,{children:"InsertUpdateQueryGenerator"})," interface"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"Register[T]()"})," performs one-time reflection on a struct type to build metadata (",(0,r.jsx)(s.code,{children:"FieldMap"}),") that enables fast, type-safe database operations."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What happens:"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Reflects on struct ",(0,r.jsx)(s.code,{children:"T"})," to extract field names and types"]}),"\n",(0,r.jsx)(s.li,{children:"Applies naming strategy to convert Go names → database names"}),"\n",(0,r.jsxs)(s.li,{children:["Detects integer ",(0,r.jsx)(s.code,{children:"Id"})," field for auto-increment handling"]}),"\n",(0,r.jsx)(s.li,{children:"Generates INSERT and UPDATE query templates"}),"\n",(0,r.jsxs)(s.li,{children:["Stores ",(0,r.jsx)(s.code,{children:"FieldMap"})," in global registry"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" golightning "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning/lpg"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    FirstName "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    LastName  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Email     "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Register with custom naming and PostgreSQL query generator"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    golightning.Register[User]("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        golightning.DefaultDbNamingStrategy{},"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        lpg.PgInsertUpdateQueryGenerator{},"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"database-specific-shortcuts",children:"Database-Specific Shortcuts"}),"\n",(0,r.jsx)(s.h4,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning/lpg"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lpg.Register[User]()  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Uses DefaultDbNamingStrategy + PgInsertUpdateQueryGenerator"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h4,{id:"mysql",children:"MySQL"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning/lmy"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lmy.Register[User]()  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Uses DefaultDbNamingStrategy + MySqlInsertUpdateQueryGenerator"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"when-to-call",children:"When to Call"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Recommended:"})," In ",(0,r.jsx)(s.code,{children:"init()"})," function"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lpg.Register[User]()"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["Why ",(0,r.jsx)(s.code,{children:"init()"}),"?"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Runs automatically when package is imported"}),"\n",(0,r.jsx)(s.li,{children:"Executes exactly once"}),"\n",(0,r.jsxs)(s.li,{children:["Happens before ",(0,r.jsx)(s.code,{children:"main()"})," starts"]}),"\n",(0,r.jsx)(s.li,{children:"Thread-safe"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"errors",children:"Errors"}),"\n",(0,r.jsx)(s.p,{children:"If you use a type without registering it first:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ❌ Never registered"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/* ... */"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" }"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    id, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" lpg."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"InsertGeneric"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(tx, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"User{})"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Panic: Non registered model User used. Please call `var _ = Register[User]()` after you define User"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Solution:"})," Always register in ",(0,r.jsx)(s.code,{children:"init()"}),":"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    lpg.Register[User]()"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"/guides/registration",children:"Registration Guide"})," - Comprehensive registration guide"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#getfieldmap",children:"GetFieldMap"})," - Retrieve registration metadata"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"getfieldmap",children:"GetFieldMap"}),"\n",(0,r.jsxs)(s.p,{children:["Retrieves the ",(0,r.jsx)(s.code,{children:"FieldMap"})," for a registered struct type."]}),"\n",(0,r.jsx)(s.h3,{id:"signature-1",children:"Signature"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"go","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetFieldMap"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(t reflect.Type) ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"FieldMap, "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"error"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]})})}),"\n",(0,r.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"t"})," - The reflect.Type of the registered struct"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"returns",children:"Returns"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"*FieldMap"})," - Pointer to the registered metadata"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"error"})," - Error if type was never registered"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"description-1",children:"Description"}),"\n",(0,r.jsxs)(s.p,{children:["Returns the pre-computed ",(0,r.jsx)(s.code,{children:"FieldMap"})," containing column mappings, query templates, and other metadata for a registered type."]}),"\n",(0,r.jsx)(s.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"reflect"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"log"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    golightning "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"github.com/tracewayapp/go-lightning"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"User"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Id   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    Name "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"string"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"init"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    golightning.Register[User]("})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        golightning.DefaultDbNamingStrategy{},"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        lpg.PgInsertUpdateQueryGenerator{},"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"func"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    userType "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" reflect."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"TypeOf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(User{})"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    fieldMap, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" golightning."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetFieldMap"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(userType)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        log."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Fatal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"User type not registered:"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", err)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    fmt."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Println"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Columns:"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", fieldMap.ColumnKeys)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    fmt."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Println"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"INSERT Query:"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", fieldMap.InsertQuery)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    fmt."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Println"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"UPDATE Query:"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:", fieldMap.UpdateQuery)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Output:"})}),"\n",(0,r.jsx)(s.pre,{"data-language":"text","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"text","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Columns: [id name]"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"INSERT Query: INSERT INTO users (name) VALUES ($1) RETURNING id"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"UPDATE Query: UPDATE users SET id = $1, name = $2 WHERE"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(s.pre,{"data-language":"go","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"go","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"fieldMap, err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" golightning."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"GetFieldMap"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(reflect."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"TypeOf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(UnregisteredType{}))"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" err "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"nil"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:'// Error: "Non registered model UnregisteredType used..."'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    log."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Fatal"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(err)"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Debugging"})," - Inspect generated queries"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Testing"})," - Verify registration configuration"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Advanced Usage"})," - Custom operations needing field metadata"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"see-also-1",children:"See Also"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"/api-reference/core/interfaces#fieldmap",children:"FieldMap Structure"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"/guides/registration",children:"Registration Guide"})}),"\n"]})]})}let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,a.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/api-reference/core/registration.mdx",route:"/api-reference/core/registration",timestamp:1766515491e3,pageMap:[{kind:"Meta",data:{index:"Home","getting-started":"Getting Started",guides:"Guides","api-reference":"API Reference",examples:"Examples",troubleshooting:"Troubleshooting",contributing:"Contributing"}},{kind:"Folder",name:"api-reference",route:"/api-reference",children:[{kind:"Meta",data:{core:"Core",postgresql:"PostgreSQL",mysql:"MySQL"}},{kind:"Folder",name:"core",route:"/api-reference/core",children:[{kind:"Meta",data:{interfaces:"Interfaces",registration:"Registration","generic-operations":"Generic Operations","manual-operations":"Manual Operations",helpers:"Helper Functions"}},{kind:"MdxPage",name:"generic-operations",route:"/api-reference/core/generic-operations"},{kind:"MdxPage",name:"helpers",route:"/api-reference/core/helpers"},{kind:"MdxPage",name:"interfaces",route:"/api-reference/core/interfaces"},{kind:"MdxPage",name:"manual-operations",route:"/api-reference/core/manual-operations"},{kind:"MdxPage",name:"registration",route:"/api-reference/core/registration"}]},{kind:"Folder",name:"mysql",route:"/api-reference/mysql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/mysql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/mysql/overview"}]},{kind:"Folder",name:"postgresql",route:"/api-reference/postgresql",children:[{kind:"Meta",data:{overview:"Overview","crud-operations":"CRUD Operations","uuid-support":"UUID Support","parameter-handling":"Parameter Handling"}},{kind:"MdxPage",name:"crud-operations",route:"/api-reference/postgresql/crud-operations"},{kind:"MdxPage",name:"overview",route:"/api-reference/postgresql/overview"},{kind:"MdxPage",name:"parameter-handling",route:"/api-reference/postgresql/parameter-handling"},{kind:"MdxPage",name:"uuid-support",route:"/api-reference/postgresql/uuid-support"}]}]},{kind:"Folder",name:"contributing",route:"/contributing",children:[{kind:"Meta",data:{development:"Development Setup",testing:"Testing"}},{kind:"MdxPage",name:"development",route:"/contributing/development"},{kind:"MdxPage",name:"testing",route:"/contributing/testing"}]},{kind:"Folder",name:"examples",route:"/examples",children:[{kind:"Meta",data:{"basic-crud":"Basic CRUD","postgresql-complete":"PostgreSQL Complete Example","mysql-complete":"MySQL Complete Example","uuid-entities":"UUID Entities","custom-naming":"Custom Naming Strategy","advanced-queries":"Advanced Queries"}},{kind:"MdxPage",name:"advanced-queries",route:"/examples/advanced-queries"},{kind:"MdxPage",name:"basic-crud",route:"/examples/basic-crud"},{kind:"MdxPage",name:"custom-naming",route:"/examples/custom-naming"},{kind:"MdxPage",name:"mysql-complete",route:"/examples/mysql-complete"},{kind:"MdxPage",name:"postgresql-complete",route:"/examples/postgresql-complete"},{kind:"MdxPage",name:"uuid-entities",route:"/examples/uuid-entities"}]},{kind:"Folder",name:"getting-started",route:"/getting-started",children:[{kind:"Meta",data:{introduction:"Introduction",installation:"Installation","quick-start":"Quick Start","core-concepts":"Core Concepts"}},{kind:"MdxPage",name:"core-concepts",route:"/getting-started/core-concepts"},{kind:"MdxPage",name:"installation",route:"/getting-started/installation"},{kind:"MdxPage",name:"introduction",route:"/getting-started/introduction"},{kind:"MdxPage",name:"quick-start",route:"/getting-started/quick-start"}]},{kind:"Folder",name:"guides",route:"/guides",children:[{kind:"Meta",data:{postgresql:"PostgreSQL",mysql:"MySQL",registration:"Registration System","naming-strategies":"Naming Strategies",transactions:"Transactions"}},{kind:"MdxPage",name:"mysql",route:"/guides/mysql"},{kind:"MdxPage",name:"naming-strategies",route:"/guides/naming-strategies"},{kind:"MdxPage",name:"postgresql",route:"/guides/postgresql"},{kind:"MdxPage",name:"registration",route:"/guides/registration"},{kind:"MdxPage",name:"transactions",route:"/guides/transactions"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"troubleshooting",route:"/troubleshooting",children:[{kind:"Meta",data:{"common-errors":"Common Errors",debugging:"Debugging Guide","migration-guide":"Migration Guide"}},{kind:"MdxPage",name:"common-errors",route:"/troubleshooting/common-errors"},{kind:"MdxPage",name:"debugging",route:"/troubleshooting/debugging"},{kind:"MdxPage",name:"migration-guide",route:"/troubleshooting/migration-guide"}]}],flexsearch:{codeblocks:!0},title:"Registration Functions",headings:o},pageNextRoute:"/api-reference/core/registration",nextraLayout:l.ZP,themeConfig:t.Z};s.default=(0,i.j)(d)},9004:function(e,s,n){"use strict";var r=n(5893);s.Z={logo:(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"1.2rem"},children:"⚡ go-lightning"}),project:{link:"https://github.com/tracewayapp/go-lightning"},docsRepositoryBase:"https://github.com/tracewayapp/go-lightning/tree/main/docs",useNextSeoProps:()=>({titleTemplate:"%s – go-lightning"}),head:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("meta",{property:"og:title",content:"go-lightning"}),(0,r.jsx)("meta",{property:"og:description",content:"Lightweight Go library for simplified database operations"})]}),primaryHue:205,darkMode:!0,nextThemes:{defaultTheme:"dark"},sidebar:{defaultMenuCollapseLevel:1,toggleButton:!0},toc:{backToTop:!0},editLink:{text:"Edit this page on GitHub →"},feedback:{content:"Question? Give us feedback →",labels:"feedback"},footer:{text:(0,r.jsxs)("span",{children:["MIT ",new Date().getFullYear()," \xa9"," ",(0,r.jsx)("a",{href:"https://github.com/tracewayapp",target:"_blank",children:"Traceway"})]})}}},5789:function(){}},function(e){e.O(0,[73,888,774,179],function(){return e(e.s=3478)}),_N_E=e.O()}]);